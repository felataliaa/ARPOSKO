<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Cinemaps WebAR</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
    <style>
      body { margin: 0; overflow: hidden; }
      #ui {
        position: fixed;
        top: 10px;
        width: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 20px;
        z-index: 999;
        color: white;
        font-family: sans-serif;
        text-shadow: 0px 0px 5px black;
      }
      #title {
        font-size: 20px;
        font-weight: bold;
      }
      button {
        padding: 5px 12px;
        font-size: 16px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <!-- UI Control -->
    <div id="ui">
      <button onclick="prevVideo()">⏮️</button>
      <div id="title">Posko KKN</div>
      <button onclick="nextVideo()">⏭️</button>
    </div>

    <!-- AR Scene -->
    <a-scene
      embedded
      arjs="sourceType: webcam; debugUIEnabled: false;"
      vr-mode-ui="enabled: false"
      renderer="logarithmicDepthBuffer: true;">
      
      <!-- Kamera -->
      <a-camera position="0 1.6 0"></a-camera>

      <!-- Plane tempat video -->
      <a-plane id="videoPlane" position="0 0 -3" rotation="0 0 0" width="4" height="2.25" material="shader: flat; src: #vid1"></a-plane>

      <!-- Asset Video -->
      <a-assets>
        <video id="vid1" src="asetAR/posko.mp4" loop="true" autoplay muted playsinline crossorigin="anonymous"></video>
        <video id="vid2" src="asetAR/joglo.mp4" loop="true" autoplay muted playsinline crossorigin="anonymous"></video>
        <video id="vid3" src="asetAR/batukapal.mp4" loop="true" autoplay muted playsinline crossorigin="anonymous"></video>
        <video id="vid4" src="asetAR/plunyon.mp4" loop="true" autoplay muted playsinline crossorigin="anonymous"></video>
      </a-assets>
    </a-scene>

    <script>
      const videos = [
        { id: "#vid1", title: "Posko KKN" },
        { id: "#vid2", title: "Joglo Wanagama" },
        { id: "#vid3", title: "Batu Kapal" },
        { id: "#vid4", title: "Jembatan Plunyon" }
      ];

      let currentIndex = 0;
      const plane = document.getElementById("videoPlane");
      const title = document.getElementById("title");

      function updateVideo() {
        const v = videos[currentIndex];
        plane.setAttribute("material", "src", v.id);
        title.innerText = v.title;

        // play ulang agar aktif di mobile
        let videoEl = document.querySelector(v.id);
        videoEl.play();
      }

      function nextVideo() {
        currentIndex = (currentIndex + 1) % videos.length;
        updateVideo();
      }

      function prevVideo() {
        currentIndex = (currentIndex - 1 + videos.length) % videos.length;
        updateVideo();
      }

      // start autoplay di mobile setelah tap
      document.body.addEventListener("click", () => {
        videos.forEach(v => document.querySelector(v.id).play());
      });
    </script>
  </body>
</html>
